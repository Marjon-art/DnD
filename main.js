(()=>{"use strict";class t{constructor(t,e){this.container=t;const s=document.createElement("div");s.classList.add("container-task"),t.append(s);const n=document.createElement("div");n.classList.add("tasks_header"),s.append(n);const i=document.createElement("h4");i.classList.add("tasks_header_text"),i.textContent=e,n.append(i);const a=document.createElement("span");a.classList.add("task_header_options"),a.textContent="...",n.append(a);const d=document.createElement("div");d.classList.add("task_list"),s.append(d);const o=document.createElement("div");o.classList.add("added_card"),o.textContent="+ Add another card",s.append(o),o.addEventListener("click",(t=>this.onAddCardClick(t))),d.addEventListener("mousedown",(t=>this.onMouseDownTask(t))),this.tasks=s,this.taskList=d,this.addedCard=o,this.drag=null,this.startX=0,this.startY=0}onMouseDownTask(t){if(t.preventDefault(),0!==t.button)return;const e=t.target;if(!e.classList.contains("task_card"))return;this.drag=e;const s=this.drag.getBoundingClientRect();this.startX=t.clientX-s.left,this.startY=t.clientY-s.top,this.previousNeighbour=this.drag.previousElementSibling,this.nextNeighbour=this.drag.nextElementSibling,this.placeholder=document.createElement("div"),this.placeholder.style.width=`${this.drag.offsetWidth}px`,this.placeholder.style.height=`${this.drag.offsetHeight}px`,this.drag.parentNode.insertBefore(this.placeholder,this.drag),this.drag.classList.add("drag"),this.drag.style.left=`${s.left}px`,this.drag.style.top=`${s.top}px`,this.drag.style.width=`${s.width}px`,this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),document.documentElement.addEventListener("mouseup",this.onMouseUp),document.documentElement.addEventListener("mousemove",this.onMouseMove)}onMouseMove(t){if(!this.drag)return;const e=t.clientX-this.startX,s=t.clientY-this.startY;this.drag.style.left=`${e}px`,this.drag.style.top=`${s}px`;const{target:n}=t;if(n.classList.contains("task_card")){const e=n.getBoundingClientRect();t.clientY-e.top>e.height/2?n.parentNode.insertBefore(this.placeholder,n.nextSibling):n.parentNode.insertBefore(this.placeholder,n)}}onMouseUp(t){if(!this.drag)return;this.drag.style=void 0;const{target:e}=t;let s=e.previousElementSibling;s&&!s.classList.contains("task_card")&&(s=null);let n=e.nextElementSibling;n&&!n.classList.contains("task_card")&&(n=null);const i=e.closest(".task_list");let a=i;i?!i||s||n||i.append(this.drag):(s=this.previousNeighbour,n=this.nextNeighbour,a=this.drag.parentNode),s?a.insertBefore(this.drag,s.nextSibling):n?a.insertBefore(this.drag,n):a.append(this.drag),this.drag.classList.remove("drag"),this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.drag=null,this.placeholder=null,document.documentElement.removeEventListener("mouseup",this.onMouseUp),document.documentElement.removeEventListener("mouseover",this.onMouseMove)}onAddCardClick(t){0===t.button&&this.addCard()}addCard(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;const e=document.createElement("div");e.classList.add("task_card");const s=document.createElement("div");s.classList.add("close_button_container"),e.append(s);const n=document.createElement("span");n.classList.add("close_button"),n.innerText="×",n.addEventListener("click",(t=>{t.preventDefault(),e.remove()})),s.append(n);const i=document.createElement("div");i.classList.add("content_card"),t?(i.setAttribute("contenteditable","true"),i.innerText=t):i.innerText="Нажмите карандаш для редактирования",e.append(i);const a=document.createElement("div");a.classList.add("card_text_edit"),a.innerHTML='<svg aria-hidden="true" focusable="false" class="octicon octicon-pencil" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible"><path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z"></path></svg>',e.append(a),a.addEventListener("click",(()=>{null===i.getAttribute("contenteditable")&&(i.textContent=""),i.setAttribute("contenteditable","true"),i.focus()})),this.taskList.append(e)}}const e=document.querySelector(".container").querySelectorAll(".task")[0],s=document.createElement("div");s.classList.add("container-tasks"),e.append(s);const n=new t(s,"todo");["Hello to Trello!","This is a card.","Click on a card to see what's behind it."].forEach((t=>n.addCard(t)));const i=new t(s,"in progress");["Invite your team to this board using the Add Members button","Drag people onto a card to indicate that they's responsible for it."].forEach((t=>{i.addCard(t)}));const a=new t(s,"done");["To learn more tricks, check out the guide."].forEach((t=>a.addCard(t)))})();
//# sourceMappingURL=main.js.map